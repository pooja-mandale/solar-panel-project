import{d as p,e as b,f as y,r as i,z as l,j as e,F as j}from"./index-Cmq24k7p.js";import{u as v,c as N,a as c}from"./index.esm-C4Ag9dnp.js";import{i as w}from"./profile-fCt9ZpW_.js";const S=()=>{const{data:r,isLoading:d}=p(),[m]=b(),[u,{isSuccess:o,isError:E}]=y(),[x,a]=i.useState(!1),[t,f]=i.useState(null),s=v({initialValues:{name:t?t.name:"",email:t?t.email:""},enableReinitialize:!0,validationSchema:N({name:c().required("Enter Name"),email:c().email("Invalid Email").required("Enter Email")}),onSubmit:async h=>{try{const n=await m({...h,_id:r?._id}).unwrap();l.success("Profile updated successfully"),a(!1)}catch(n){l.error("Update failed"),console.error(n)}}}),g=()=>{f(r),a(!0)};return i.useEffect(()=>{o&&(l.success("user logged out successfully"),navigate("/"))},[o]),d?e.jsx("div",{className:"text-center py-20",children:"Loading..."}):e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 p-4",children:[e.jsx(j,{position:"top-center"}),e.jsxs("div",{className:"bg-white shadow-lg rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 text-center mb-4",children:"User Profile"}),e.jsx("div",{className:"text-center mb-6",children:e.jsx("img",{src:w,alt:"User Avatar",className:"w-24 h-24 rounded-full mx-auto mb-4 border border-gray-300"})}),e.jsxs("div",{className:"text-gray-700 space-y-4",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",r?.name||"Not Provided"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",r?.email||"Not Provided"]})]}),e.jsxs("div",{className:"mt-6 flex flex-col sm:flex-row sm:justify-between items-center gap-4",children:[e.jsx("button",{onClick:g,className:"w-full sm:w-auto bg-gradient-to-r from-green-400 via-lime-400 to-yellow-300 text-white px-6 py-3 rounded-md hover:from-green-500 hover:via-lime-500 hover:to-yellow-400 transition duration-300 shadow-md focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50",children:"Edit Profile"}),e.jsx("button",{onClick:()=>u(),className:"w-full sm:w-auto bg-red-500 text-white px-6 py-3 rounded-md hover:bg-red-600 transition duration-300 shadow-md focus:outline-none focus:ring-2 focus:ring-red-400 focus:ring-opacity-50",children:"Logout"})]})]}),x&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Edit Profile"}),e.jsxs("form",{onSubmit:s.handleSubmit,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Name"}),e.jsx("input",{type:"text",...s.getFieldProps("name"),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"}),s.touched.name&&s.errors.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700",children:"Email"}),e.jsx("input",{type:"email",...s.getFieldProps("email"),className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400"}),s.touched.email&&s.errors.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:s.errors.email})]}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",onClick:()=>a(!1),className:`bg-gradient-to-r from-green-400 via-lime-400 to-yellow-300 \r
                  bg-gray-300 px-4 py-2 rounded-md hover:bg-gray-400`,children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-gradient-to-r from-green-400 via-lime-400 to-yellow-300 text-white px-4 py-2 rounded-md hover:bg-blue-600",children:"Save Changes"})]})]})]})})]})};export{S as default};
